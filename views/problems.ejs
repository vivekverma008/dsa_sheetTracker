<link rel="stylesheet" href="/images/problems/problems.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">



<div id="main">
    <button class="openbtn" onclick="openNav()">â˜° Topics</button>  

  </div>
<div id="mySidebar" class="sidebar container bg-dark">
    <div class = "row text-end">
        <i onclick = "closeNav()" class="bi bi-x-circle-fill text-white bg-dark  pe-auto fs-5" id = "x_bar"></i>
    </div>
    
    <ul class="text-light bg-dark list-group list-unstyled">
        <% for(topic of topics){ %>
            <li  class="text-light bg-dark " >
                <a href="/problems/?topic=<%=topic%> ">
                    <%= topic %>
                        <br>
                </a>
            </li>
        <%}%>
    </ul>
</div>


  
        <div class = "d-flex flex-column justify-content-center">

                
                
                
                <% let ob={} ; let bk_mrk_ob = {};%> 
                <% if(locals.user){ %> <%# If the user exists  %> 
                    <div class="d-flex justify-content-center"style = "margin : 45px">
                        <h3 class = "text-center"><%=user.problems.length%>/<%=all_problems.length%></h3>
                    </div>
                    <% for(ques of user.problems){ %>
                        <% let idd = ques.id; ob[idd] = true;%> <%# true is usr did ques  %>
                         
                    <% } %>  
                    <% for(ques of user.bookMarks){ %>
                        
                        <% let idb = ques.id; bk_mrk_ob[idb] = true;%> <%# true is usr did ques  %>
                         
                    <% } %>  

                    <div  class="overflow-auto container text-center" style="height: 775px; width : 1000px ">
                        <table class = "table">
                            <thead>
                                <th scope="col"> # </th>
                                <th>Bookmark</th>
                                <th scope="col">Question</th>
                                <th>notes</th>                           
                            </thead>
                            <tbody>
                                <% let c = 0; %> <%# question count  %> 
                                <% for(let question of all_problems){ %>
                                    <% c++; %>
                                    <tr>
                                        <th>
                                            <%= c ;%> 
                                        </th>
                                        <td>
                                            <% if(bk_mrk_ob[question.id]){ %>
                                                    <a href="/problems/bookmark/?id=<%=question.id%>&toggle=0">
                                                        <i class="bi bi-bookmark-star-fill"></i>
                                                    </a>       
                                            <% }else{ %>
                                                <a href="/problems/bookmark/?id=<%=question.id%>&toggle=1">
                                                    <i class="bi bi-bookmark setbookmrk" ></i>
                                                </a>
                                                
                                            <% } %> 
                                        </td>
                                        <td>
                                            <div class="container">
                                                <div class="row">
                                                    <div class = "col-10">
                                                        <a href="<%=question.url%>">
                                                            <%= question.name %>
                                                        </a>
                                                    </div>
                                                    <div class="col">
                                                        <form action="/problems/update_problem" method="post">
                                                            <% if(ob[question.id]){ %>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input btn btn-success" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked  name="done" onchange="this.form.submit()">
                                                                </div>
                                                            <% }else {%> 
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" name="done" onchange="this.form.submit()">   
                                                                </div>
                                                                
                                                            <% } %> 
                                                            <input type="hidden" name="id" value=<%=question.id%>>
                                                        </form>
                                                    </div>

                                                </div>
                                            </div>
                                            
                                           
                                        </td>
                                        <td>
                                            nts
                                        </td>
                                    <% } %> 
                            </tbody>
                        </table>
                    </div>
                <%}else{%>
                    <div  class="overflow-auto container text-center" style="height: 775px; width : 1000px ">
                        <table class = "table">
                            <thead>
                                <th scope="col"> # </th>
                                <th scope="col">Question</th>                           
                            </thead>
                            <tbody>
                                <% let c = 0; %> <%# question count  %> 
                                <% for(let question of all_problems){ %>
                                    <% c++; %>
                                    <tr>
                                        <th>
                                            <%= c ;%> 
                                        </th>
                                        <td>
                                            <div class="container">
                                                <div class="row">
                                                    <div class = "col-12">
                                                        <a href="<%=question.url%>">
                                                            <%= question.name %>
                                                        </a>
                                                    </div>
                                                    
                                                </div>
                                            </div>   
                                        </td>
                                    <% } %> 
                            </tbody>
                        </table>
                    </div>
                <% } %> 


                
            
        </div>


<script src="/images/problems/problems.js"></script>